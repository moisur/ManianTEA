<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tisanes de Khoznavar - Site en Construction</title>
    <script src="https://www.google.com/recaptcha/enterprise.js?render=6Ld37SIqAAAAALzGUoYS1444GFxYwR6OODSRm6V7"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap');

        body, html {
            margin: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Roboto', sans-serif;
            perspective: 1000px;
        }
        .scene {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #5D8AA8, #F0F8FF, #E6E6FA);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            animation: ambientLight 20s infinite alternate;
        }
        @keyframes ambientLight {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        .mountain {
            position: absolute;
            bottom: -50px;
            width: 0;
            height: 0;
            border-left: 25vw solid transparent;
            border-right: 25vw solid transparent;
            border-bottom: 60vh solid #2F4F4F;
            transform-origin: bottom center;
            transform: translateZ(-100px);
        }
        .mountain:nth-child(2) {
            left: -10vw;
            border-bottom-color: #3A5031;
            transform: translateZ(-200px);
        }
        .mountain:nth-child(3) {
            right: -10vw;
            border-bottom-color: #5A7751;
            transform: translateZ(-150px);
        }
        .plant {
            position: absolute;
            bottom: 0;
            width: 20px;
            height: 0;
            background: linear-gradient(to top, var(--plant-color-1), var(--plant-color-2));
            transition: height 2s ease-out;
            transform-origin: bottom center;
            transform-style: preserve-3d;
        }
        .plant::before, .plant::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 30px;
            border-radius: 50% 50% 0 0;
        }
        .plant::before {
            left: -10px;
            transform: rotate(-30deg);
            background: var(--plant-color-2);

        }
        .plant::after {
            right: -10px;
            transform: rotate(30deg);
            background: var(--plant-color-1);

        }
        .flower {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--flower-color-1), var(--flower-color-2));
            opacity: 0;
            transition: opacity 1s ease-in, transform 1s ease-out;
            transform-origin: center bottom;
        }
        .quote {
            position: absolute;
            color:#FFA500;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            font-size: 24px;
            font-family: 'Playfair Display', serif;
            text-align: center;
            opacity: 0;
            transition: opacity 2s ease-in, transform 2s ease-out;
            transform: translateZ(50px);
            pointer-events: none;
        }
        .sun {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            box-shadow: 0 0 50px #FFD700;
            transform: translateZ(100px);
            animation: pulsate 5s infinite alternate;
        }
        @keyframes pulsate {
            0% { transform: translateZ(100px) scale(1); }
            100% { transform: translateZ(100px) scale(1.1); }
        }
        .cloud {
            position: absolute;
            width: 150px;
            height: 40px;
            background: #FFFFFF;
            border-radius: 40px;
            opacity: 0.8;
            animation: float 30s infinite linear;
            transform: translateZ(100px);
        }
        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            background: #FFFFFF;
            border-radius: 50%;
        }
        .cloud::before {
            width: 60px;
            height: 60px;
            top: -30px;
            left: 10px;
        }
        .cloud::after {
            width: 80px;
            height: 80px;
            top: -40px;
            right: 10px;
        }
        @keyframes float {
            0% { transform: translateX(-150px) translateZ(100px); }
            100% { transform: translateX(calc(100vw + 150px)) translateZ(100px); }
        }
        .contact-form {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 10;
            width: 90%;
            max-width: 400px;

        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .pulse {
            animation: pulse 0.5s ease-in-out infinite, box-shadow 0.5s ease-in-out;


        }

        .contact-form h2 {
            font-family: var(--font-secondary);
            color: var(--primary-color);
            margin-top: 0;
        }

        .contact-form input[type="email"] {
            width: calc(100% - 22px);
            padding: 10px;
            margin: 10px 0;
            border: 1px solid var(--accent-color);
            border-radius: 5px;
        }

        .contact-form button {
            background-color: #FFA500;
            color: var(--primary-color);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: var(--font-main);
        }

        .logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            max-width: 100%;
            max-height: 100%;
        }
        .construction-notice {
            position: absolute;
            top: 10px;
            width: 100%;
            background: rgba(255, 165, 0, 0.9);
            color: white;
            padding: 10px 0;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
            z-index: 1000;
        }
        .quote-zone {
            position: absolute;
            width: 25%;
            height: 20%;
            font-weight: 600;
            background: rgba(0, 0, 0, 0.7);  /* Augmenter légèrement la transparence */
            backdrop-filter: blur(10px);  /* Augmenter le flou */
            border: 1px solid rgba(255, 255, 255, 0.2);  /* Ajouter une bordure subtile */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1);  /* Ombrage pour la profondeur */
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            transition: opacity 2s ease-in;
        }
        .quote-zone.left {
            left: 5%;
            top: 50%;
            transform: translateY(-50%);
        }
        .quote-zone.right-top {
            right: 5%;
            top: 17%;
        }
        .quote-zone.right-bottom {
            right: 8%;
            bottom: 30%;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        @keyframes slideFromLeft {
            from { transform: translateX(-100%) translateZ(50px); opacity: 0; }
            to { transform: translateX(0) translateZ(50px); opacity: 1; }
        }
        @keyframes slideFromRight {
            from { transform: translateX(100%) translateZ(50px); opacity: 0; }
            to { transform: translateX(0) translateZ(50px); opacity: 1; }
        }
        @keyframes slideFromTop {
            from { transform: translateY(-100%) translateZ(50px); opacity: 0; }
            to { transform: translateY(0) translateZ(50px); opacity: 1; }
        }
        @keyframes slideFromBottom {
            from { transform: translateY(100%) translateZ(50px); opacity: 0; }
            to { transform: translateY(0) translateZ(50px); opacity: 1; }
        }
        @keyframes scaleUp {
            from { transform: scale(0) translateZ(50px); opacity: 0; }
            to { transform: scale(1) translateZ(50px); opacity: 1; }
        }

        .arrows {

            display:flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-top: 20px;
            gap: 20%;
            margin-bottom: 5%;
        }

        .arrow {
            display: flex;
            font-size: 24px;
        }

        @keyframes blink {
        0% {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
        }

        .blink {
        animation: blink 1.745s infinite;
        }
        @media (max-width: 1199px) {
            .quote-zone {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="scene">
        <div class="sun"></div>
        <div class="mountain"></div>
        <div class="mountain"></div>
        <div class="mountain"></div>
        <div class="cloud" style="top: 15%; animation-duration: 60s;"></div>
        <div class="cloud" style="top: 25%; left: -100px; animation-duration: 75s;"></div>
        <div class="contact-form">
            <div class="logo">
                <img src="logo.png" alt="MANIAN logo">
            </div>
            <h2>Soyez les premiers à découvrir nos tisanes exceptionnelles !</h2>
            <div class="arrows">
                <span class="arrow">↓</span>
            </div>
            <input type="email" placeholder="Votre email">
            <div class="arrows">
                <span class="arrow">↑</span>
                <span class="arrow">↑</span>
                <span class="arrow">↑</span>
            </div>
            <button>Rejoindre la liste d'attente</button>
    
        </div>
        <div class="construction-notice">
            Site en construction - Ouverture prochaine de notre boutique de thés et infusions uniques !
        </div>
        <div class="quote-zone left"></div>
        <div class="quote-zone top"></div>
        <div class="quote-zone right-top"></div>
        <div class="quote-zone right-bottom"></div>
    </div>
    <script>
        const scene = document.querySelector('.scene');
        const quoteZones = {
            left: document.querySelector('.quote-zone.left'),
            top: document.querySelector('.quote-zone.top'), 
            rightTop: document.querySelector('.quote-zone.right-top'),
            rightBottom: document.querySelector('.quote-zone.right-bottom')
            };

        const quotes = [
            "400 habitants, 4000 ans d'histoire, et une infusion qui défie le temps.",
            "Tisanes de Khoznavar : le secret bien gardé des  arméniens",
            "Cueillies là où même les anges craignent de laisser leurs empreintes",
            "L'alchimie secrète des sommets arméniens : des remèdes aussi vieux que le temps.",
            "Du bord du précipice naît l'espoir : savourez le courage d'un peuple indomptable",
            "La pureté à l'état sauvage : là où la nature règne encore en maître absolu.",
            "Cueillis à la main dans les montagnes vierges d'Arménie : le bio à l'état brut",
            "Les secrets de santé millénaires des montagnes arméniennes dans votre tasse",
            "Cueillies dans l'Eden oublié : des plantes intouchées par la modernité.",
            "Biologique ? Nos plantes ignorent même l'existence des pesticides",
            "Des arômes forgés par l'Histoire : chaque sachet, une page de la résistance arménienne",
            "Dans chaque goutte, le chant des montagnes. Dans chaque feuille, l'écho des anciens.",
            "Nos tisanes : le dernier refuge du goût authentique dans un monde standardisé",
            "Des infusions qui ont survécu aux empires : goûtez l'indomptable esprit arménien",
            "Si Hippocrate avait connu nos tisanes, il aurait réécrit son serment.",
            "Nos plantes : cultivées par le soleil, bercées par le vent, et cueillies avec révérence",
            "Là où les plantes poussent au rythme des prières ancestrales",
            "Des arômes si authentiques qu'ils pourraient réveiller les rois arméniens endormis",
            "Nos tisanes : le dernier fragment d'un paradis que le monde moderne n'a pas souillé",
            "Quand la nature et la résilience s'infusent : le secret millénaire des montagnes arméniennes",
            "Plus qu'une tisane, un testament : celui d'un peuple qui refuse de s'effacer.",
            "Dans chaque feuille, le murmure des ancêtres ; dans chaque gorgée, la force de l'Arménie éternelle",
            "Manian : Gardien d'un Eden oublié, dans chaque tasse l'essence pure d'un peuple indomptable."
        ];

        const plantColors = [
            ['#228B22', '#32CD32'],
            ['#8B4513', '#D2691E'],
            ['#556B2F', '#6B8E23'],
            ['#B8860B', '#DAA520'],
            ['#2F4F4F', '#3CB371']
        ];

        const flowerColors = [
            ['#FF69B4', '#FF1493'],
            ['#FFD700', '#FFA500'],
            ['#9370DB', '#8A2BE2'],
            ['#00CED1', '#20B2AA'],
            ['#FF6347', '#FF4500']
        ];

        let plantCount = 0;
        let currentZone = 0;
        const zones = ['left', 'top', 'rightTop', 'rightBottom'];

        function createPlant() {
            if (plantCount >= 7) return;
            
            const plant = document.createElement('div');
            plant.classList.add('plant');
            plant.style.left = `${Math.random() * 100}%`;
            plant.style.transform = `translateZ(${Math.random() * 100}px)`;

            const colorIndex = Math.floor(Math.random() * plantColors.length);
            plant.style.setProperty('--plant-color-1', plantColors[colorIndex][0]);
            plant.style.setProperty('--plant-color-2', plantColors[colorIndex][1]);

            scene.appendChild(plant);

            setTimeout(() => {
                plant.style.height = `${Math.random() * 100 + 100}px`;
            }, 100);

            setTimeout(() => {
                createFlower(plant);
            }, 2000);

            plantCount++;
        }

        function createFlower(plant) {
            const flower = document.createElement('div');
            flower.classList.add('flower');
            flower.style.left = `${plant.offsetLeft - 5}px`;
            flower.style.bottom = `${parseInt(plant.style.height) + 10}px`;
            flower.style.transform = plant.style.transform;

            const colorIndex = Math.floor(Math.random() * flowerColors.length);
            flower.style.setProperty('--flower-color-1', flowerColors[colorIndex][0]);
            flower.style.setProperty('--flower-color-2', flowerColors[colorIndex][1]);

            scene.appendChild(flower);

            setTimeout(() => {
                flower.style.opacity = 1;
                flower.style.transform += ' scale(1.2)';
            }, 100);
        }
        

        function displayQuote() {
    if (quotes.length > 0) {
        const zone = quoteZones[zones[currentZone]];
        currentZone = (currentZone + 1) % zones.length;

        if (zone.firstChild) {
            zone.firstChild.remove();
        }

        const quote = document.createElement('div');
        quote.classList.add('quote');
        quote.textContent = quotes.shift();
        zone.appendChild(quote);

        zone.style.opacity = 1;

        const animationStyles = [
            'fadeIn',
            'slideFromLeft',
            'slideFromRight',
            'slideFromBottom',
            'scaleUp',
        ];

        const randomStyle = animationStyles[Math.floor(Math.random() * animationStyles.length)];
        quote.style.animation = `${randomStyle} 2s forwards`;

        setTimeout(() => {
            quote.style.opacity = 0;
            quote.style.transform = 'translateZ(400px)';
            setTimeout(() => {
                quote.remove();
                displayQuote();
            }, 2000);
        }, 8000);
    } else {
        // Si aucune nouvelle citation n'arrive, remettre l'opacité de toutes les zones à zéro
        Object.values(quoteZones).forEach(zone => {
            zone.style.opacity = 0;
        });
        const contactForm = document.querySelector('.arrow');
        contactForm.classList.add('pulse');
        
        const arrows = document.querySelectorAll('.arrow');
        arrows.forEach(arrow => arrow.classList.add('blink'));
        }
}

        setInterval(createPlant, 2000);
        setInterval(displayQuote, 8000);

// ... (le reste du code JavaScript existant)

function showWaitingMessage() {
    const waitingOverlay = document.createElement('div');
    waitingOverlay.id = 'waiting-overlay';
    waitingOverlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        color: white;
        font-family: 'Roboto', sans-serif;
    `;

    const message = document.createElement('div');
    message.innerHTML = `
        <h2>Notre serveur se réveille pour vous servir !</h2>
        <p>Comme les plantes de Khoznavar qui se reposent la nuit, notre serveur économise son énergie quand il n'est pas sollicité.</p>
        <p>Cela peut prendre jusqu'à 50 secondes. Profitez-en pour en apprendre plus sur nos tisanes uniques !</p>
        <div id="progress-bar" style="width: 300px; height: 20px; background-color: #ddd; margin-top: 20px;">
            <div id="progress" style="width: 0%; height: 100%; background-color: #4CAF50;"></div>
        </div>
        <p id="timer">Temps écoulé : 0 secondes</p>
    `;

    const story = document.createElement('div');
    story.style.cssText = `
        max-width: 600px;
        text-align: center;
        margin-top: 20px;
    `;
    story.innerHTML = `
        <h3>L'histoire de Khoznavar</h3>
        <p>Niché dans les montagnes d'Arménie, le village de Khoznavar abrite depuis des millénaires des secrets bien gardés de la nature.</p>
        <p>Nos tisanes sont le fruit d'une tradition ancestrale, transmise de génération en génération.</p>
        <p>Chaque plante est cueillie à la main, dans le respect total de son environnement, pour vous offrir une expérience de dégustation unique.</p>
    `;

    waitingOverlay.appendChild(message);
    waitingOverlay.appendChild(story);
    document.body.appendChild(waitingOverlay);

    let seconds = 0;
    const timer = setInterval(() => {
        seconds++;
        document.getElementById('timer').textContent = `Temps écoulé : ${seconds} secondes`;
        const progress = Math.min(seconds * 2, 100); // 50 seconds = 100%
        document.getElementById('progress').style.width = `${progress}%`;
        if (seconds >= 50) {
            clearInterval(timer);
        }
    }, 1000);

    return waitingOverlay;
}

document.querySelector('button').addEventListener('click', async (e) => {
    e.preventDefault();

    function validateEmail(email) {
        const re = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*\.[a-zA-Z]{2,}$/;
        return re.test(email);
    }

    const email = document.querySelector('input[type="email"]').value;

    if (!validateEmail(email)) {
        alert("Veuillez entrer une adresse email valide.");
        return false;
    }

    const waitingOverlay = showWaitingMessage();

    grecaptcha.enterprise.ready(async () => {
        const token = await grecaptcha.enterprise.execute('6Ld37SIqAAAAALzGUoYS1444GFxYwR6OODSRm6V7', { action: 'subscribe' });

        try {
            const response = await fetch('https://maniantea.onrender.com/api/subscribers', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, token }),
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            waitingOverlay.remove();
            alert(data.msg);
        } catch (error) {
            console.error('Error:', error);
            waitingOverlay.remove();
            alert('Une erreur est survenue. Veuillez réessayer plus tard.');
        }
    });
});
    </script>
</body>
</html>
